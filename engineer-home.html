<html lang="en">
<head>
  <title>Job Management System</title>
  <meta charset="utf-8">
  <meta name="Job Management System" content="Index">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/custom.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</head>
<body>

  <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo03" aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="engineer-home.html">Job Management System</a>

    <div class="collapse navbar-collapse" id="navbarTogglerDemo03">

      <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
        <!-- <li class="nav-item">
        <a class="nav-link" href="engineer-home.html">Broadcast</a>
      </li>
      <li class="nav-item">
      <a class="nav-link" href="engineer-jobs.html">My Jobs</a>
    </li> -->
  </ul>

  <form class="form-inline my-2 my-lg-0">
    <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
      <li class="nav-item active">
        <a class="nav-link" href="index.html">Logout <span class="sr-only">(current)</span></a>
      </li>
    </ul>
  </form>
</div>
</nav>
<div class="container cont-margin-top jumbotron">
  <div id="exceed" class="alert alert-danger alert-dismissible d-none">
    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
    <strong>Already active!</strong> You already have an ongoing job.
  </div>
  <div id="danger" class="alert alert-danger alert-dismissible d-none">
    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
    <strong>Limit exceeded!</strong> You already have 2 existing job in your queue.
  </div>
  <div class="alert alert-info alert-dismissible">
    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
    <strong>Job Assigned!</strong> Click
    <a href="engineer-job-detail.html"> here </a>
    to view Job Number 25.
    <a href="#" data-dismiss="alert" class="add2"> Accept </a>/
    <a href="#" data-dismiss="alert"> Decline </a>

  </div>
  <div class="">
    <h1>Accepted Jobs</h1>
    <table class="table table-striped table-dark">
      <thead>
        <tr>
          <th scope="col">Job number</th>
          <th scope="col">Site</th>
          <th scope="col">Job Description</th>
          <th scope="col">Fault Description</th>
          <th scope="col">Classification</th>
          <th scope="col">Urgency</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th scope="row">25</th>
          <td>Site A</td>
          <td>Minor Maintenence</td>
          <td>Screw loose in the devices</td>
          <td>Maintenence</td>
          <td style="color:Green">Green</td>
          <td>
            <div class="dropdown show">
              <a class="btn btn-sm btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Actions
              </a>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                <a class="dropdown-item" href="engineer-form.html">Select</a>
                <a class="transfer dropdown-item" href="#">Unassign</a>
                <a class="pause dropdown-item" href="#">Resume</a>
              </div>
            </div>
          </td>
        </tr>

        <tr id="item-1" class="d-none">
          <th scope="row">25</th>
          <td>Site A</td>
          <td>Minor Maintenence</td>
          <td>Screw loose in the devices</td>
          <td>Maintenence</td>
          <td style="color:Green">Green</td>
          <td>
            <div class="dropdown show">
              <a class="btn btn-sm btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Actions
              </a>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                <a class="dropdown-item" href="engineer-form.html">Select</a>
                <a class="transfer dropdown-item" href="#">Unassign</a>
                <a class="pause dropdown-item" href="#">Resume</a>
              </div>
            </div>
          </td>
        </tr>
        <tr id="item-2" class="d-none">
          <th scope="row">555</th>
          <td>Site B</td>
          <td>Fix lever for the electric box</td>
          <td>Damaged lever</td>
          <td>Maintenence</td>
          <td style="color:Red">Red</td>
          <td>
            <div class="dropdown show">
              <a class="btn btn-sm btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Actions
              </a>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                <a class="dropdown-item" href="engineer-form.html">Select</a>
                <a class="transfer dropdown-item" href="#">Unassign</a>
                <a class="pause dropdown-item" href="#">Resume</a>
              </div>
            </div>
          </td>
        </tr>
        <tr id="item-3" class="d-none">
          <th scope="row">25</th>
          <td>Site A</td>
          <td>Minor Maintenence</td>
          <td>Screw loose in the devices</td>
          <td>Maintenence</td>
          <td style="color:Green">Green</td>
          <td>
            <div class="dropdown show">
              <a class="btn btn-sm btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Actions
              </a>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                <a class="dropdown-item" href="engineer-form.html">Select</a>
                <a class="transfer dropdown-item" href="#">Unassign</a>
                <a class="pause dropdown-item" href="#">Resume</a>
              </div>
            </div>
          </td>
        </tr>
        <tr id="item-4" class="d-none">
          <th scope="row">555</th>
          <td>Site B</td>
          <td>Fix lever for the electric box</td>
          <td>Damaged lever</td>
          <td>Maintenence</td>
          <td style="color:Red">Red</td>
          <td>
            <div class="dropdown show">
              <a class="btn btn-sm btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Actions
              </a>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                <a class="dropdown-item" href="engineer-form.html">Select</a>
                <a class="transfer dropdown-item" href="#">Unassign</a>
                <a class="pause dropdown-item" href="#">Resume</a>
              </div>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<div class="container cont-margin-top jumbotron">

  <div class="">
    <h1>Broadcasted Jobs</h1>
    <table class="table table-striped table-dark">
      <thead>
        <tr>
          <th scope="col">Job number</th>
          <th scope="col">Site</th>
          <th scope="col">Job Description</th>
          <th scope="col">Fault Description</th>
          <th scope="col">Classification</th>
          <th scope="col">Urgency</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr id="item-a">
          <th scope="row">20</th>
          <td>Site A</td>
          <td>Minor Maintenence</td>
          <td>Screw loose in the devices</td>
          <td>Maintenence</td>
          <td style="color:Green">Green</td>
          <td>
            <div class="dropdown show">
              <a class="btn btn-sm btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Actions
              </a>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                <a class="dropdown-item" href="engineer-job-detail.html">View</a>
                <a class="add dropdown-item" >Accept</a>
              </div>
            </div>
          </td>
        </tr>
        <tr id="item-b">
          <th scope="row">355</th>
          <td>Site B</td>
          <td>Fix lever for the electric box</td>
          <td>Damaged lever</td>
          <td>Maintenence</td>
          <td style="color:Red">Red</td>
          <td>
            <div class="dropdown show">
              <a class="btn btn-sm btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Actions
              </a>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                <a class="dropdown-item" href="engineer-job-detail.html">View</a>
                <a class="add dropdown-item">Accept</a>
              </div>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
<script src="js/bootstrap.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
<script>
$(document).ready(function(){

  var activeJobs=0;
  var currentJobs=1;
  var item1=false;
  var item2=false;
  var item3=false;
  var item4=false;

  $(".add").click(function(){
    console.log(currentJobs);

    if(currentJobs > 1){
      $("#danger").removeClass("d-none");
    } else {

      $(this).parent().parent().parent().parent().addClass("d-none");
      if(item1==false){
        $("#item-1").removeClass("d-none");
        item1=true;
      } else if(item2==false) {
        $("#item-2").removeClass("d-none");
        item2=true;
      } else if(item3==false) {
        $("#item-3").removeClass("d-none");
        item3=true;
      } else {
        $("#item-4").removeClass("d-none");
        item4=true;
      }
      currentJobs++;
      console.log(currentJobs);
    }
  });

  $(".add2").click(function(){
    if(currentJobs==2){
      $("#danger").removeClass("d-none");
    } else {
      if(item1==false){
        $("#item-1").removeClass("d-none");
        item1=true;
      } else if(item2==false) {
        $("#item-2").removeClass("d-none");
        item2=true;
      } else if(item3==false) {
        $("#item-3").removeClass("d-none");
        item3=true;
      } else {
        $("#item-4").removeClass("d-none");
        item4=true;
      }
      currentJobs+=1;
      console.log(currentJobs);
    }
  });

  $(".transfer").click(function(){
    $(this).parent().parent().parent().parent().addClass("d-none");
    currentJobs-=1;
  });

  $(".pause").click(function(){
    var state = $(this).html();

    if(state=="Pause"){
      $(this).parent().parent().parent().parent().css({background:"#32383e"});
      $(this).html("Resume");
      activeJobs-=1;

    } else {
      if (activeJobs>0){
        $("#exceed").removeClass("d-none");
      } else {
        $(this).parent().parent().parent().parent().css({background:"#7ca35d"});
        $(this).html("Pause");
        activeJobs=1;
      }
    }
  });
})
</script>
</body>
</html>
